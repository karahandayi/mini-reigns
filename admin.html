<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Mini Reigns Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;padding:10px;font-family:Arial;background:#111;color:white;}
input,textarea,button{width:100%;margin:5px 0;padding:5px;}
button{cursor:pointer;}
</style>
</head>
<body>
<h2>Admin Paneli</h2>

<h4>BaÅŸlangÄ±Ã§ EkranÄ± Arkaplan</h4>
<input id="admin-start-bg" placeholder="https://example.com/start-bg.jpg">

<h4>Oyun ArkaplanÄ±</h4>
<input id="admin-bg" placeholder="https://example.com/game-bg.jpg">

<h4>MÃ¼zik (YouTube)</h4>
<input id="admin-music" placeholder="YouTube linki">
<div>
<button id="play-music">â–¶ï¸ AÃ§</button>
<button id="pause-music">â¸ Kapat</button>
</div>

<h4>Stat BaÅŸlangÄ±Ã§</h4>
<label>Halk:</label><input id="admin-halk" type="number">
<label>Kilise:</label><input id="admin-kilise" type="number">
<label>Hazine:</label><input id="admin-hazine" type="number">
<label>Ordu:</label><input id="admin-ordu" type="number">

<h4>Stat BaÅŸlÄ±klarÄ±</h4>
<label>Stat 1:</label><input id="admin-title-halk" type="text">
<label>Stat 2:</label><input id="admin-title-kilise" type="text">
<label>Stat 3:</label><input id="admin-title-hazine" type="text">
<label>Stat 4:</label><input id="admin-title-ordu" type="text">

<hr>
<h4>Kart Ekle/DÃ¼zenle</h4>
<textarea id="admin-text" placeholder="Kart metni"></textarea>
<input id="admin-img" placeholder="Kart gÃ¶rsel URL">
<input id="admin-yes" placeholder='{"halk":10,"hazine":-5}'>
<input id="admin-no" placeholder='{"halk":-5}'>
<button id="add-card">Kart Ekle</button>
<ul id="card-list"></ul>

<hr>
<button id="save-admin">ğŸ’¾ Kaydet</button>

<script>
const STORAGE_KEY="miniReignsData";
let stats={halk:50,kilise:50,hazine:50,ordu:50};
let cards=[];
let titles={halk:"Halk",kilise:"Kilise",hazine:"Hazine",ordu:"Ordu"};
let backgrounds={start:"",game:""};
let musicUrl="";

const startBg=document.getElementById("admin-start-bg");
const gameBg=document.getElementById("admin-bg");
const musicInput=document.getElementById("admin-music");

function loadData(){
  const data=JSON.parse(localStorage.getItem(STORAGE_KEY)||"{}");
  if(data.stats) stats=data.stats;
  if(data.cards) cards=data.cards;
  if(data.titles) titles=data.titles;
  if(data.backgrounds) backgrounds=data.backgrounds;
  if(data.musicUrl) musicUrl=data.musicUrl;

  document.getElementById("admin-halk").value=stats.halk;
  document.getElementById("admin-kilise").value=stats.kilise;
  document.getElementById("admin-hazine").value=stats.hazine;
  document.getElementById("admin-ordu").value=stats.ordu;
  document.getElementById("admin-title-halk").value=titles.halk;
  document.getElementById("admin-title-kilise").value=titles.kilise;
  document.getElementById("admin-title-hazine").value=titles.hazine;
  document.getElementById("admin-title-ordu").value=titles.ordu;
  startBg.value=backgrounds.start;
  gameBg.value=backgrounds.game;
  musicInput.value=musicUrl;

  refreshCardList();
}

function saveData(){
  localStorage.setItem(STORAGE_KEY,JSON.stringify({stats,cards,titles,backgrounds,musicUrl}));
  alert("Kaydedildi!");
}

function refreshCardList(){
  const list=document.getElementById("card-list");
  list.innerHTML="";
  cards.forEach((c,i)=>{
    const li=document.createElement("li");
    li.innerText=c.text;
    li.onclick=()=>{
      document.getElementById("admin-text").value=c.text;
      document.getElementById("admin-img").value=c.img||"";
      document.getElementById("admin-yes").value=JSON.stringify(c.yes);
      document.getElementById("admin-no").value=JSON.stringify(c.no);
    };
    list.appendChild(li);
  });
}

document.getElementById("add-card").onclick=()=>{
  const text=document.getElementById("admin-text").value;
  const img=document.getElementById("admin-img").value;
  let yes,no;
  try{yes=JSON.parse(document.getElementById("admin-yes").value);no=JSON.parse(document.getElementById("admin-no").value);}catch(e){alert("JSON hatalÄ±");return;}
  cards.push({text,img,yes,no});
  refreshCardList();
};

document.getElementById("save-admin").onclick=()=>{
  stats.halk=parseInt(document.getElementById("admin-halk").value)||50;
  stats.kilise=parseInt(document.getElementById("admin-kilise").value)||50;
  stats.hazine=parseInt(document.getElementById("admin-hazine").value)||50;
  stats.ordu=parseInt(document.getElementById("admin-ordu").value)||50;
  titles.halk=document.getElementById("admin-title-halk").value;
  titles.kilise=document.getElementById("admin-title-kilise").value;
  titles.hazine=document.getElementById("admin-title-hazine").value;
  titles.ordu=document.getElementById("admin-title-ordu").value;
  backgrounds.start=startBg.value;
  backgrounds.game=gameBg.value;
  musicUrl=musicInput.value;
  saveData();
};

// MÃ¼zik oynatma
let musicFrame=null;
document.getElementById("play-music").onclick=()=>{
  if(musicFrame) musicFrame.remove();
  if(musicUrl){
    let vid="";
    try{vid=musicUrl.split("v=")[1].split("&")[0];}catch(e){vid="";}
    if(vid){
      musicFrame=document.createElement("iframe");
      musicFrame.width=0;
      musicFrame.height=0;
      musicFrame.src=`https://www.youtube.com/embed/${vid}?autoplay=1&loop=1&playlist=${vid}`;
      musicFrame.allow="autoplay";
      musicFrame.style.display="none";
      document.body.appendChild(musicFrame);
    }
  }
};
document.getElementById("pause-music").onclick=()=>{if(musicFrame) musicFrame.remove();musicFrame=null;};

loadData();
</script>
</body>
</html>
